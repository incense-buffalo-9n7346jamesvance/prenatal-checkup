<!DOCTYPE html>
<html lang="zh-CN">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
  <meta name="description" content="å‡†å¦ˆå¦ˆäº§æ£€æ—¶é—´è¡¨">
  <title>å‡†å¦ˆå¦ˆäº§æ£€æ—¶é—´è¡¨</title>
  <link rel="icon" href="data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 100 100'><text y='.9em' font-size='90'>ğŸ¤°</text></svg>">
  <script src="https://cdnjs.cloudflare.com/ajax/libs/react/18.2.0/umd/react.production.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/react-dom/18.2.0/umd/react-dom.production.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/babel-standalone/7.23.5/babel.min.js"></script>
  <style>
    * { margin: 0; padding: 0; box-sizing: border-box; }
    body { font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, "PingFang SC", "Microsoft YaHei", sans-serif; background: #FFF5F7; padding-bottom: 60px; }
    input[type="date"] { -webkit-appearance: none; }
    button { -webkit-tap-highlight-color: transparent; }
    .hide-scrollbar::-webkit-scrollbar { display: none; }
    .hide-scrollbar { -ms-overflow-style: none; scrollbar-width: none; }
    
    @keyframes slideUp { from { transform: translateY(100%); } to { transform: translateY(0); } }
    @keyframes fadeIn { from { opacity: 0; } to { opacity: 1; } }
    .share-card-modal { animation: slideUp 0.3s ease-out; }
    .fade-in { animation: fadeIn 0.5s ease-in; }
    
    .lock-screen {
      position: fixed; top: 0; left: 0; right: 0; bottom: 0;
      background: linear-gradient(135deg, #FF9A9E 0%, #FECFEF 100%);
      z-index: 999;
      display: flex;
      flex-direction: column;
      align-items: center;
      justify-content: center;
      padding: 20px;
      color: white;
    }
  </style>
</head>
<body>
  <div id="root"></div>
  <script type="text/babel">
    const { useState, useMemo, useEffect } = React;

    // --- 0. é…ç½®é¡¹ ---
    const UNLOCK_CODE = "BABY2025"; 

    // --- 1. æ•°æ®éƒ¨åˆ† ---
    const fetalData = {
      4: { size: "ç½‚ç²Ÿç±½", emoji: "ğŸŒ°", status: "å—ç²¾åµç€åºŠ", length: "0.1cm", weight: "-" },
      6: { size: "æ‰è±†", emoji: "ğŸ«˜", status: "å¿ƒè„å¼€å§‹è·³åŠ¨", length: "0.5cm", weight: "-" },
      8: { size: "è”“è¶Šè“", emoji: "ğŸ’", status: "æ‰‹æŒ‡è„šè¶¾åˆ†åŒ–", length: "1.6cm", weight: "1g" },
      10: { size: "é‡‘æ¡”", emoji: "ğŸŠ", status: "å™¨å®˜åˆæ­¥å½¢æˆ", length: "3cm", weight: "4g" },
      12: { size: "é’æŸ ", emoji: "ğŸ‹", status: "å››è‚¢å‘è‚²å®Œå–„", length: "5cm", weight: "14g" },
      14: { size: "æŸ æª¬", emoji: "ğŸ‹", status: "æŒ‡çº¹å¼€å§‹å½¢æˆ", length: "9cm", weight: "45g" }, 
      16: { size: "ç‰›æ²¹æœ", emoji: "ğŸ¥‘", status: "å¯èƒ½æ„Ÿå—åˆ°èƒåŠ¨", length: "12cm", weight: "100g" },
      20: { size: "é¦™è•‰", emoji: "ğŸŒ", status: "å‘³è§‰å¬è§‰å‘è‚²", length: "16cm", weight: "300g" },
      24: { size: "ç‰ç±³", emoji: "ğŸŒ½", status: "è‚ºéƒ¨å¼€å§‹å‘è‚²", length: "30cm", weight: "600g" },
      28: { size: "èŒ„å­", emoji: "ğŸ†", status: "å¯ä»¥åšæ¢¦äº†", length: "38cm", weight: "1kg" },
      32: { size: "è è", emoji: "ğŸ", status: "æŒ‡ç”²é•¿åˆ°æŒ‡å°–", length: "42cm", weight: "1.7kg" },
      36: { size: "é•¿å¶è´è‹£", emoji: "ğŸ¥¬", status: "å‡†å¤‡å…¥ç›†", length: "47cm", weight: "2.6kg" },
      40: { size: "è¥¿ç“œ", emoji: "ğŸ‰", status: "å‡†å¤‡å‡ºæ¥è§é¢å•¦", length: "51cm", weight: "3.4kg" }
    };

    const checkupData = [
      { id: 1, week: 7, weekRange: "6-8å‘¨", period: "early", name: "ç¡®è¯Šæ€€å­• & æ’é™¤å®«å¤–å­•", icon: "ğŸ’š", tags: ["Bè¶…"], purpose: "é€šè¿‡Bè¶…ç¡®è®¤å®«å†…å­•ï¼Œå¯è§èƒå¿ƒèƒèŠ½ã€‚", items: ["Bè¶…ç¡®è®¤å®«å†…å¦Šå¨ ", "æŸ¥çœ‹èƒå¿ƒèƒèŠ½"], tips: "å‘ç°æ€€å­•åå°½æ—©å°±è¯Šï¼Œç¡®è®¤æ˜¯å¦å®«å†…å­•ã€‚", tips_dad: "é™ªå¥¹å»åŒ»é™¢ï¼Œå®‰æŠšå¥¹çš„ç´§å¼ æƒ…ç»ªã€‚å¦‚æœå¥¹å­•åä¸¥é‡ï¼Œå‡†å¤‡ç‚¹æ¸…æ·¡çš„è‹æ‰“é¥¼å¹²ã€‚", prepareWeek: 0, prepareNote: "å‘ç°æ€€å­•åå°½å¿«é¢„çº¦", needAppointment: false },
      { id: 2, week: 12, weekRange: "11-13å‘¨", period: "early", name: "ç¬¬ä¸€æ¬¡æ­£å¼äº§æ£€ï¼ˆå»ºæ¡£ï¼‰", icon: "ğŸ‘¤", tags: ["å…³é”®", "å»ºæ¡£"], purpose: "ä¿—ç§°'å»ºæ¡£'ã€‚é¢†å–æ¯å­å¥åº·æ‰‹å†Œï¼Œè¿›è¡Œå…¨é¢èº«ä½“æ£€æŸ¥ã€‚", items: ["å»ºç«‹æ¯å­å¥åº·æ‰‹å†Œ", "è¡€å¸¸è§„", "å°¿å¸¸è§„", "è‚è‚¾åŠŸèƒ½", "ä¼ æŸ“ç—…ç­›æŸ¥"], tips: "è¿™æ˜¯æœ€é‡è¦çš„ä¸€æ¬¡äº§æ£€ï¼éœ€è¦ç©ºè…¹æŠ½è¡€ã€‚", tips_dad: "è¿™æ¬¡è¦æŠ½å¾ˆå¤šè¡€ï¼Œè®°å¾—éšèº«å¸¦ç‚¹é¢åŒ…å’Œæ¸©æ°´ï¼ŒæŠ½å®Œè¡€ç¬¬ä¸€æ—¶é—´é€’ç»™å¥¹åƒã€‚", prepareWeek: 10, prepareNote: "å­•10å‘¨å¼€å§‹å‡†å¤‡èµ„æ–™ï¼Œé¢„çº¦å»ºæ¡£", needAppointment: true },
      { id: 3, week: 12, weekRange: "11-13+6å‘¨", period: "early", name: "NTæ£€æŸ¥", icon: "ğŸƒ", tags: ["ä¸¥æ ¼é™æ—¶"], purpose: "èƒå„¿é¢ˆé¡¹é€æ˜å±‚æ‰«æï¼Œæ’æŸ¥å”æ°é£é™©ã€‚", items: ["NTæµ‹é‡", "æ—©å”è¯„ä¼°"], tips: "âš ï¸ å¿…é¡»åœ¨13å‘¨+6å¤©å‰å®Œæˆï¼", tips_dad: "è¿™æ˜¯ç¬¬ä¸€æ¬¡èƒ½æ¸…æ™°çœ‹åˆ°å®å®äººå½¢çš„Bè¶…ï¼Œå°½é‡è¯·å‡é™ªåŒï¼Œä¸€èµ·è§è¯ï¼", prepareWeek: 9, prepareNote: "å­•9å‘¨å°±è¦å¼€å§‹é¢„çº¦ï¼", needAppointment: true },
      { id: 4, week: 17, weekRange: "15-20å‘¨", period: "mid", name: "å”æ°ç­›æŸ¥ / æ— åˆ›DNA", icon: "ğŸ§¬", tags: ["ç­›æŸ¥"], purpose: "è¯„ä¼°å”æ°ç»¼åˆå¾é£é™©ã€‚", items: ["ä¸­å”", "æˆ–æ— åˆ›DNA"], tips: "éœ€ç©ºè…¹æŠ½è¡€ã€‚", tips_dad: "å¦‚æœç»“æœæœ‰é£é™©ï¼Œå¥¹ä¼šéå¸¸ç„¦è™‘ã€‚å‘Šè¯‰å¥¹â€œä¸ç®¡æ€æ ·æˆ‘ä»¬ä¸€èµ·é¢å¯¹â€ã€‚", prepareWeek: 14, prepareNote: "å­•14å‘¨é¢„çº¦", needAppointment: true },
      { id: 5, week: 23, weekRange: "20-24å‘¨", period: "mid", name: "å¤§æ’ç•¸", icon: "ğŸ‘ï¸", tags: ["æ ¸å¿ƒ"], purpose: "ç³»ç»Ÿæ€§èƒå„¿è¶…å£°æ£€æŸ¥ã€‚", items: ["å…¨èº«ç»“æ„æ£€æŸ¥"], tips: "æ£€æŸ¥æ—¶é—´é•¿ï¼Œå¯èƒ½éœ€è¦å¤æŸ¥ã€‚", tips_dad: "å¦‚æœå®å®ä¸é…åˆï¼Œéœ€è¦çˆ¬æ¥¼æ¢¯æˆ–åƒç‚¹ç”œé£Ÿã€‚é™ªå¥¹ä¸€èµ·æ•£æ­¥ã€‚", prepareWeek: 16, prepareNote: "å­•16å‘¨é¢„çº¦ï¼Œæœ€éš¾æŠ¢çš„å·", needAppointment: true },
      { id: 6, week: 26, weekRange: "24-28å‘¨", period: "mid", name: "ç³–è€é‡è¯•éªŒ", icon: "ğŸ¬", tags: ["ç©ºè…¹"], purpose: "ç­›æŸ¥å¦Šå¨ æœŸç³–å°¿ç—…ã€‚", items: ["ç©ºè…¹è¡€ç³–", "æœç³–å1h", "æœç³–å2h"], tips: "å–å®Œç³–æ°´ä¸è¦èµ°åŠ¨ã€‚", tips_dad: "è¿™é¡¹æ£€æŸ¥è€—æ—¶å¾ˆä¹…ä¸”ä¸èƒ½åƒä¸œè¥¿ï¼Œéå¸¸éš¾å—ã€‚å¸¦å¥½å……ç”µå®ï¼Œé™ªå¥¹æ‰“å‘æ—¶é—´ã€‚", prepareWeek: 24, prepareNote: "æå‰äº†è§£æ³¨æ„äº‹é¡¹", needAppointment: false },
      { id: 7, week: 30, weekRange: "28-32å‘¨", period: "late", name: "å°æ’ç•¸", icon: "ğŸ“‹", tags: ["Bè¶…"], purpose: "æ™šæœŸè¶…å£°å¤æŸ¥ï¼Œè¯„ä¼°å‘è‚²ã€‚", items: ["æ™šæœŸBè¶…", "èƒä½æ£€æŸ¥"], tips: "å¼€å§‹æ¯å¤©æ•°èƒåŠ¨ã€‚", tips_dad: "ä»¥åæ¯å¤©ç›‘ç£å¹¶é™ªå¥¹æ•°èƒåŠ¨ã€‚å¦‚æœå¥¹å¼¯è…°ä¸æ–¹ä¾¿ï¼Œå¸®å¥¹ç³»é‹å¸¦ã€‚", prepareWeek: 27, prepareNote: "å­•27å‘¨é¢„çº¦", needAppointment: true },
      { id: 8, week: 36, weekRange: "35-37å‘¨", period: "late", name: "GBSç­›æŸ¥ & èƒå¿ƒç›‘æŠ¤", icon: "ğŸ”¬", tags: ["é‡è¦"], purpose: "é¢„é˜²æ„ŸæŸ“ï¼Œç›‘æµ‹èƒå¿ƒã€‚", items: ["GBSç­›æŸ¥", "èƒç›‘"], tips: "æ¯å‘¨äº§æ£€ä¸€æ¬¡ã€‚å‡†å¤‡å¾…äº§åŒ…ã€‚", tips_dad: "æ£€æŸ¥å¾…äº§åŒ…æ˜¯å¦é½å…¨ã€‚ç¡®è®¤å»åŒ»é™¢çš„è·¯çº¿ï¼ŒæŠŠè½¦æ²¹åŠ æ»¡ã€‚", prepareWeek: 34, prepareNote: "å‡†å¤‡å¾…äº§åŒ…", needAppointment: false },
      { id: 9, week: 39, weekRange: "37-40å‘¨", period: "late", name: "æ¯å‘¨äº§æ£€", icon: "ğŸ¥", tags: ["é«˜é¢‘"], purpose: "ç›‘æµ‹ä¸´äº§å¾å…†ã€‚", items: ["èƒç›‘", "å®«é¢ˆæ£€æŸ¥"], tips: "æ³¨æ„è§çº¢ã€ç ´æ°´ã€å®«ç¼©ã€‚", tips_dad: "æ‰‹æœº24å°æ—¶å¼€æœºã€‚å®‰æŠšå¥¹çš„äº§å‰ç„¦è™‘ã€‚è€å©†è¾›è‹¦äº†ï¼", prepareWeek: 36, prepareNote: "è¯ä»¶éšèº«å¸¦", needAppointment: false }
    ];

    const guideDataMom = {
      early: { 
        title: "å­•æ—©æœŸ (1-13å‘¨)", 
        supplements: [{name:"å¶é…¸",dose:"0.4-0.8mg",note:"é¢„é˜²ç¥ç»ç®¡ç•¸å½¢"}, {name:"ç»´ç”Ÿç´ B6",dose:"é€‚é‡",note:"éµåŒ»å˜±ç¼“è§£å­•å"}],
        diet_good: ["æ¸…æ·¡é¥®é£Ÿ", "å°‘é£Ÿå¤šé¤", "è‹æ‰“é¥¼å¹²(æ™¨å)"],
        diet_bad: ["ç”Ÿé£Ÿåˆºèº«", "é…’ç²¾", "æœªç†Ÿé€çš„è›‹/è‚‰"],
        exercise: "âœ¨ æ•£æ­¥ï¼šæ¯å¤©20-30åˆ†é’Ÿï¼Œé¿å…å‰§çƒˆè·³è·ƒã€‚\nâœ¨ é¿å…ï¼šå·è…¹ã€è´Ÿé‡ã€é«˜å¼ºåº¦æœ‰æ°§ã€‚",
        lifestyle: "ğŸ’¡ å—œç¡æ˜¯æ­£å¸¸çš„ï¼Œå¤šä¼‘æ¯ã€‚\nğŸ’¡ è¿œç¦»å® ç‰©ç²ªä¾¿(å¼“å½¢è™«)ã€‚\nğŸ’¡ æ­¤æ—¶è‚šå­ä¸æ˜æ˜¾ï¼Œå¯ä»¥å¼€å§‹æ¶‚é¢„é˜²å¦Šå¨ çº¹æ²¹ã€‚"
      },
      mid: { 
        title: "å­•ä¸­æœŸ (14-27å‘¨)", 
        supplements: [{name:"é’™",dose:"1000mg",note:"é¢„é˜²è…¿æŠ½ç­‹"}, {name:"é“",dose:"27-30mg",note:"é¢„é˜²ç¼ºé“æ€§è´«è¡€"}, {name:"DHA",dose:"200mg",note:"èƒå„¿è§†ç½‘è†œå¤§è„‘å‘è‚²"}], 
        diet_good: ["ä¼˜è´¨è›‹ç™½(é±¼è™¾)", "è†³é£Ÿçº¤ç»´(é˜²ä¾¿ç§˜)", "å«é“é£Ÿç‰©"],
        diet_bad: ["é«˜ç³–ç”œé£Ÿ(æ§ç³–)", "è¿‡å’¸é£Ÿç‰©(é˜²æ°´è‚¿)"],
        exercise: "âœ¨ é»„é‡‘æœŸï¼šå­•å¦‡ç‘œä¼½ã€æ¸¸æ³³ã€å¿«èµ°ã€‚\nâœ¨ å‡¯æ ¼å°”è¿åŠ¨ï¼šæ¯å¤©åšï¼Œé¢„é˜²æ¼å°¿ã€‚",
        lifestyle: "ğŸ’¡ å¯èƒ½ä¼šå‡ºç°å‡æ€§å®«ç¼©ï¼Œæ³¨æ„åŒºåˆ†ã€‚\nğŸ’¡ ç¡è§‰å»ºè®®å¼€å§‹å°è¯•å·¦ä¾§å§ã€‚\nğŸ’¡ ç‰™é¾ˆå®¹æ˜“å‡ºè¡€ï¼Œæ¢è½¯æ¯›ç‰™åˆ·ã€‚"
      },
      late: { 
        title: "å­•æ™šæœŸ (28-40å‘¨)", 
        supplements: [{name:"é’™",dose:"1200mg",note:"éª¨éª¼å¿«é€Ÿé’™åŒ–"}, {name:"é”Œ",dose:"é€‚é‡",note:"æœ‰åŠ©äºåˆ†å¨©"}], 
        diet_good: ["å†¬ç“œ/çº¢è±†(å»æ°´è‚¿)", "åŠ©äº§é£Ÿç‰©(è¶³æœˆå)"],
        diet_bad: ["é«˜çƒ­é‡(æ§åˆ¶èƒå„¿ä½“é‡)", "éš¾æ¶ˆåŒ–é£Ÿç‰©"],
        exercise: "âœ¨ éª¨ç›†è¿åŠ¨ï¼šåç‘œä¼½çƒã€‚\nâœ¨ æ•£æ­¥ï¼šå¸®åŠ©èƒå„¿å…¥ç›†ã€‚\nâœ¨ é¿å…ï¼šä»°å§è¿åŠ¨ï¼Œé˜²å‹è¿«è¡€ç®¡ã€‚",
        lifestyle: "ğŸ’¡ æ•°èƒåŠ¨ï¼æ•°èƒåŠ¨ï¼\nğŸ’¡ å‡†å¤‡å¾…äº§åŒ…ï¼Œäº†è§£å»åŒ»é™¢è·¯çº¿ã€‚\nğŸ’¡ å‡ºç°ç ´æ°´å¹³èººï¼Œå«æ•‘æŠ¤è½¦ã€‚"
      }
    };

    const guideDataDad = {
      early: { 
        title: "å­•æ—©æœŸ (1-13å‘¨)", 
        mission: "ğŸ›¡ï¸ æ ¸å¿ƒä»»åŠ¡ï¼šåŒ…å®¹ä¸åå‹¤",
        action_list: ["æ‰¿åŒ…å¨æˆ¿ï¼šå¥¹é—»åˆ°æ²¹çƒŸå¯èƒ½ä¼šåã€‚", "æ‰¿æ‹…å®¶åŠ¡ï¼šæé‡ç‰©ã€å¼¯è…°çš„æ´»å…¨åŒ…ã€‚", "æƒ…ç»ªä»·å€¼ï¼šå¥¹å¯èƒ½çªç„¶å‘è„¾æ°”ï¼Œé‚£æ˜¯æ¿€ç´ åœ¨ä½œæ€ªï¼ŒæŠ±æŠ±å¥¹ã€‚", "å‡†å¤‡é›¶é£Ÿï¼šåºŠå¤´æ”¾ç‚¹è‹æ‰“é¥¼å¹²ã€‚"],
        avoid_list: ["åœ¨å¥¹é¢å‰æŠ½çƒŸï¼ˆç»å¯¹ç¦æ­¢ï¼‰", "æŠ±æ€¨å¥¹å˜æ‡’äº†ï¼ˆå¥¹åœ¨æ‹¼å‘½é•¿å­©å­ï¼‰", "å–·æµ“çƒˆçš„é¦™æ°´æˆ–å‘èƒ¶"],
        bonus: "ğŸ’¡ æ¯å¤©ä¸‹ç­å¸¦ä¸€ä¸ªå°æƒŠå–œï¼ˆæ°´æœæˆ–å°èŠ±ï¼‰ï¼Œç¼“è§£å¥¹çš„ç´§å¼ ç„¦è™‘ã€‚"
      },
      mid: { 
        title: "å­•ä¸­æœŸ (14-27å‘¨)", 
        mission: "ğŸ¤ æ ¸å¿ƒä»»åŠ¡ï¼šå‚ä¸ä¸äº’åŠ¨",
        action_list: ["èƒæ•™äº’åŠ¨ï¼šæ¯å¤©å¯¹ç€è‚šå­è¯´è¯´è¯ï¼Œè®²æ•…äº‹ã€‚", "é™ªåŒäº§æ£€ï¼šå°½é‡ä¸é”™è¿‡æ¯ä¸€æ¬¡äº§æ£€ã€‚", "å®‰æ’æ—…è¡Œï¼šè¶èº«ä½“èˆ’æœï¼Œå¸¦å¥¹å»å‘¨è¾¹æ•£æ•£å¿ƒï¼ˆBabymoonï¼‰ã€‚", "æŒ‰æ‘©æœåŠ¡ï¼šå¸®å¥¹æŒ‰æ‘©å°è…¿ï¼Œç¼“è§£æ°´è‚¿ã€‚"],
        avoid_list: ["è®©å¥¹æé‡ç‰©", "é•¿é€”è·‹æ¶‰å¤ªç´¯çš„è¡Œç¨‹", "å†·è½å¥¹ï¼ˆå¤šå¤¸å¥¹æ€€å­•ä¹Ÿå¾ˆç¾ï¼‰"],
        bonus: "ğŸ’¡ å­¦ä¹ ç»™å®å®æ¢å°¿å¸ƒã€æ´—æ¾¡çš„è§†é¢‘ï¼Œè®©å¥¹çŸ¥é“ä½ ä¹Ÿåœ¨åŠªåŠ›ã€‚"
      },
      late: { 
        title: "å­•æ™šæœŸ (28-40å‘¨)", 
        mission: "ğŸš‘ æ ¸å¿ƒä»»åŠ¡ï¼šå¾…å‘½ä¸å®ˆæŠ¤",
        action_list: ["åå‹¤éƒ¨é•¿ï¼šç¡®è®¤å¾…äº§åŒ…é½å…¨ï¼Œè¯ä»¶æ”¾å¥½ã€‚", "å¸æœºå¾…å‘½ï¼šæ‘¸æ¸…å»åŒ»é™¢çš„æœ€å¿«è·¯çº¿ï¼Œè½¦æ²¹åŠ æ»¡ã€‚", "æ•°èƒåŠ¨ï¼šæ¯å¤©æé†’å¹¶é™ªå¥¹ä¸€èµ·æ•°ã€‚", "éšæ—¶è”ç³»ï¼šæ‰‹æœº24å°æ—¶å¼€æœºï¼Œé“ƒå£°å¼€æœ€å¤§ã€‚"],
        avoid_list: ["å‡ºè¿œé—¨/å‡ºå·®", "å–é…’ï¼ˆéšæ—¶å¯èƒ½è¦å¼€è½¦å»åŒ»é™¢ï¼‰", "æ‰‹æœºé™éŸ³"],
        bonus: "ğŸ’¡ æå‰äº†è§£æ¯ä¹³å–‚å…»çŸ¥è¯†ï¼Œåšå¥¹æœ€åšå®šçš„æ”¯æŒè€…ã€‚"
      }
    };

    const quotesLibrary = {
      mom: {
        early: ["å¬åˆ°å¿ƒè·³çš„é‚£ä¸€åˆ»ï¼Œä¸–ç•Œéƒ½äº®äº†", "å®è´æ­£åœ¨åŠªåŠ›å®‰å®¶ï¼Œå¦ˆå¦ˆä¹Ÿè¦åŠ æ²¹", "è™½ç„¶è¿˜æ„Ÿè§‰ä¸åˆ°ä½ ï¼Œä½†æˆ‘çŸ¥é“ä½ åœ¨", "æ‰€æœ‰çš„ä¸é€‚ï¼Œéƒ½æ˜¯ä¸ºäº†æœ€ç¾çš„é‡è§", "å°å°çš„ä½ ï¼Œæ­£åœ¨èº«ä½“é‡Œè¿›è¡Œä¸€åœºå¤§å†’é™©", "ä»Šå¤©ä¹Ÿæ˜¯åŠªåŠ›ç»™å®è´è¾“é€è¥å…»çš„ä¸€å¤©"],
        mid: ["æ„Ÿå—æ¯ä¸€æ¬¡èƒåŠ¨ï¼Œéƒ½æ˜¯çˆ±çš„å›åº”", "ä½ æ˜¯ä¸Šå¤©èµç»™æˆ‘æœ€å¥½çš„ç¤¼ç‰©", "å’Œä½ åˆä½“çš„æ—¥å­ï¼Œæ¯ä¸€å¤©éƒ½å€¼å¾—çºªå¿µ", "ä¿æŒå¥½å¿ƒæƒ…ï¼Œå®å®ä¹Ÿä¼šæ„Ÿå—åˆ°å“¦", "ä»Šå¤©åƒäº†å¥½åƒçš„ï¼Œä½ ä¹Ÿå¾ˆå¼€å¿ƒå§ï¼Ÿ", "æ‘¸æ‘¸åœ†æ»šæ»šçš„è‚šå­ï¼Œæ˜¯æ»¡æ»¡çš„å¹¸ç¦"],
        late: ["æ‰€æœ‰çš„ç­‰å¾…ï¼Œéƒ½æ˜¯ä¸ºäº†æœ€ç¾çš„é‡è§", "ç›¸ä¿¡è‡ªå·±ï¼Œä½ çš„èº«ä½“å¤©ç”ŸçŸ¥é“å¦‚ä½•åˆ†å¨©", "è¿˜æœ‰ä¸€ç‚¹ç‚¹æ—¶é—´ï¼Œæˆ‘ä»¬å°±è¦è§é¢å•¦", "ä½ æ¯”æƒ³è±¡ä¸­æ›´å‹‡æ•¢ï¼ŒåŠ æ²¹", "å¾…äº§åŒ…å‡†å¤‡å¥½å•¦ï¼Œä¸‡äº‹ä¿±å¤‡", "è™½ç„¶èµ°è·¯åƒä¼é¹…ï¼Œä½†å¿ƒæ˜¯é£ç¿”çš„"]
      },
      dad: {
        early: ["è€å©†è¾›è‹¦äº†ï¼Œä»Šå¤©ä¹Ÿè¦å¤šçˆ±å¥¹ä¸€ç‚¹", "æˆ‘ä¼šæ˜¯ä½ æœ€åšå¼ºçš„åç›¾", "è™½ç„¶çœ‹ä¸è§ï¼Œä½†æˆ‘çŸ¥é“ä½ åœ¨æ‚„æ‚„é•¿å¤§", "å‡†çˆ¸çˆ¸çš„è‚©è†€ï¼Œæ˜¯å®¶æœ€åšå®çš„ä¾é ", "ä»Šå¤©ä¹Ÿè¦åŠªåŠ›å·¥ä½œï¼Œèµšå¥¶ç²‰é’±ï¼", "çœ‹ç€å¥¹éš¾å—ï¼Œæ¨ä¸å¾—æ›¿å¥¹æ‰¿å—"],
        mid: ["å°‘ç©æ‰‹æœºå¤šé™ªèŠï¼Œå®å®èƒ½å¬è§çˆ¸çˆ¸çš„å£°éŸ³", "ç»™è€å©†æŒ‰æ‘©å°è…¿ï¼Œæ˜¯å‡†çˆ¸çˆ¸çš„å¿…ä¿®è¯¾", "æœŸå¾…å¸¦ä½ å»çœ‹ä¸ä¸€æ ·çš„ä¸–ç•Œ", "åŠªåŠ›å·¥ä½œï¼Œæ›´è¦åŠªåŠ›é¡¾å®¶", "ä»Šå¤©ç»™å®å®è®²ä¸ªä»€ä¹ˆæ•…äº‹å‘¢ï¼Ÿ", "åˆšåˆšæ‘¸åˆ°äº†ï¼æ˜¯ä½ è¸¢æˆ‘äº†å—ï¼Ÿ"],
        late: ["ä½ ä¸ç”¨å¾ˆå®Œç¾ï¼Œåªè¦å¾ˆçˆ±å¥¹ä»¬å°±å¤Ÿäº†", "æ— è®ºå‘ç”Ÿä»€ä¹ˆï¼Œæˆ‘éƒ½åœ¨ä½ èº«è¾¹", "å‡†å¤‡å¥½å•¦ï¼Œæˆ‘ä»¬è¦å½“çˆ¸çˆ¸å¦ˆå¦ˆäº†", "è€å©†ï¼Œä½ è¾›è‹¦äº†", "æ‰‹æœº24å°æ—¶å¾…æœºï¼Œéšæ—¶å¬ä»å¬å”¤", "è™½ç„¶æˆ‘å¾ˆç´§å¼ ï¼Œä½†æˆ‘ä¸èƒ½è¡¨ç°å‡ºæ¥"]
      }
    };

    function addDays(date, days) { const r = new Date(date); r.setDate(r.getDate() + days); return r; }
    function formatDate(date) { return `${date.getMonth()+1}æœˆ${date.getDate()}æ—¥`; }
    function getWeekInfo(lmp) { const diff = Math.floor((new Date() - lmp)/(86400000)); return { weeks: Math.floor(diff/7), days: diff%7, totalDays: diff }; }
    
    function getFetalData(week) {
        const weeks = Object.keys(fetalData).map(Number).sort((a,b)=>a-b);
        let closest = 4;
        for(let w of weeks) { if(week >= w) closest = w; }
        return fetalData[closest];
    }

    function getNextCheckup(currentWeek, completed) {
      const pending = checkupData.find(item => !completed[item.id] && (parseInt(item.weekRange.split('-')[0]) || item.week) >= currentWeek);
      if (!pending) return null;
      const startWeek = parseInt(pending.weekRange.split('-')[0]) || pending.week;
      const weeksUntil = Math.max(0, startWeek - currentWeek);
      return { days: weeksUntil * 7, name: pending.name };
    }

    function getCheckupStatus(item, currentWeek, completed) {
      if (completed[item.id]) return { status: 'completed', label: 'å·²å®Œæˆ', color: '#4CAF50', bgColor: '#E8F5E9' };
      const start = parseInt(item.weekRange.split('-')[0]) || item.week - 1;
      const end = parseInt(item.weekRange.split('-')[1]) || item.week + 2;
      
      if (currentWeek > end + 1) return { status: 'overdue', label: 'å·²è¶…æ—¶', color: '#F44336', bgColor: '#FFEBEE' };
      if (currentWeek >= start - 1 && currentWeek <= end + 1) return { status: 'current', label: 'è¿›è¡Œä¸­', color: '#FF6B95', bgColor: '#FCE4EC' };
      return { status: 'pending', label: 'å¾…è¿›è¡Œ', color: '#9E9E9E', bgColor: '#F5F5F5' };
    }

    function App() {
      const [isUnlocked, setIsUnlocked] = useState(() => localStorage.getItem('mom_app_unlocked') === 'true');
      const [inputCode, setInputCode] = useState('');
      const [errorMsg, setErrorMsg] = useState('');
      const [showProfile, setShowProfile] = useState(false);
      
      const [lmpDate, setLmpDate] = useState(() => localStorage.getItem('mom_lmp_date') || '');
      const [completed, setCompleted] = useState(() => JSON.parse(localStorage.getItem('mom_completed_checks')) || {});
      const [role, setRole] = useState(() => localStorage.getItem('mom_user_role') || 'mom'); 
      const [showShare, setShowShare] = useState(false);
      const [tab, setTab] = useState('checkup');
      const [expanded, setExpanded] = useState(null);

      useEffect(() => { if(lmpDate) localStorage.setItem('mom_lmp_date', lmpDate); }, [lmpDate]);
      useEffect(() => { localStorage.setItem('mom_completed_checks', JSON.stringify(completed)); }, [completed]);
      useEffect(() => { localStorage.setItem('mom_user_role', role); }, [role]);

      const handleUnlock = () => {
        if (inputCode === UNLOCK_CODE) {
          setIsUnlocked(true);
          localStorage.setItem('mom_app_unlocked', 'true');
        } else {
          setErrorMsg('æ— æ•ˆçš„é€šè¡Œè¯ï¼Œè¯·è”ç³»å¤å¦®è·å–');
        }
      };

      const data = useMemo(() => {
        if (!lmpDate) return null;
        const lmp = new Date(lmpDate);
        const weekInfo = getWeekInfo(lmp);
        const edd = addDays(lmp, 280);
        const fetal = getFetalData(weekInfo.weeks);
        const period = weekInfo.weeks >= 28 ? 'late' : weekInfo.weeks >= 14 ? 'mid' : 'early';
        const nextCheck = getNextCheckup(weekInfo.weeks, completed);
        const guide = role === 'mom' ? guideDataMom[period] : guideDataDad[period];
        const quoteList = quotesLibrary[role][period];
        const dayIndex = weekInfo.totalDays; 
        const quote = quoteList[Math.abs(dayIndex) % quoteList.length];
        return { lmp, edd, weekInfo, fetal, period, guide, nextCheck, quote };
      }, [lmpDate, role, completed]);

      if (!isUnlocked) {
        return (
          <div className="lock-screen">
             <div style={{ fontSize: '64px', marginBottom: '20px' }}>ğŸ¤°</div>
             <h1 style={{ fontSize: '24px', fontWeight: 600, marginBottom: '10px' }}>å‡†å¦ˆå¦ˆäº§æ£€åŠ©æ‰‹</h1>
             <p style={{ fontSize: '14px', opacity: 0.9, marginBottom: '30px' }}>è¯·è¾“å…¥ä¸“å±é€šè¡Œè¯ä»¥è§£é”å…¨éƒ¨åŠŸèƒ½</p>
             <input type="text" placeholder="è¯·è¾“å…¥é€šè¡Œè¯" value={inputCode} onChange={(e) => {setInputCode(e.target.value); setErrorMsg('');}} style={{ padding: '12px 20px', borderRadius: '30px', border: 'none', width: '240px', textAlign: 'center', fontSize: '16px', marginBottom: '16px', boxShadow: '0 4px 10px rgba(0,0,0,0.1)' }} />
             <button onClick={handleUnlock} style={{ background: 'white', color: '#FF9A9E', padding: '12px 40px', borderRadius: '30px', border: 'none', fontSize: '16px', fontWeight: 600, boxShadow: '0 4px 10px rgba(0,0,0,0.1)', cursor: 'pointer' }}>è§£é”</button>
             {errorMsg && <div style={{ marginTop: '20px', fontSize: '13px', background: 'rgba(0,0,0,0.2)', padding: '6px 12px', borderRadius: '4px' }}>âš ï¸ {errorMsg}</div>}
             <div style={{ position: 'absolute', bottom: '30px', fontSize: '12px', opacity: 0.7 }}>Powered by PMå¤å¦®</div>
          </div>
        );
      }

      return (
        <div className="fade-in" style={{ maxWidth: '500px', margin: '0 auto', position: 'relative' }}>
          {/* Header */}
          <div style={{ background: role === 'mom' ? 'linear-gradient(135deg, #FF6B95, #FF8A80)' : 'linear-gradient(135deg, #42A5F5, #64B5F6)', padding: '24px 20px 40px', color: 'white', transition: 'all 0.3s' }}>
            <div style={{ display: 'flex', justifyContent: 'space-between', alignItems: 'center', marginBottom: '24px' }}>
              <button onClick={() => setRole(r => r === 'mom' ? 'dad' : 'mom')} style={{ background: 'rgba(255,255,255,0.25)', border: '1px solid rgba(255,255,255,0.4)', color: 'white', padding: '6px 12px', borderRadius: '20px', fontSize: '13px', fontWeight: 500, cursor: 'pointer', backdropFilter: 'blur(4px)' }}>
                  {role === 'mom' ? 'ğŸ‘© æˆ‘æ˜¯å¦ˆå¦ˆ (åˆ‡æ¢)' : 'ğŸ‘¨ æˆ‘æ˜¯çˆ¸çˆ¸ (åˆ‡æ¢)'}
              </button>
              <button onClick={() => setShowShare(true)} style={{ background: 'rgba(255,255,255,0.25)', border: '1px solid rgba(255,255,255,0.4)', color: 'white', padding: '6px 12px', borderRadius: '20px', fontSize: '13px', fontWeight: 500, display: 'flex', alignItems: 'center', gap: '4px', cursor: 'pointer', backdropFilter: 'blur(4px)' }}>
                <span>ğŸ“·</span> ç”Ÿæˆæ‰“å¡å›¾
              </button>
            </div>
            
            {data ? (
                <div>
                   <div style={{ display: 'flex', alignItems: 'baseline', gap: '6px', textShadow: '0 2px 4px rgba(0,0,0,0.1)' }}>
                     <span style={{ fontSize: '56px', fontWeight: 700, lineHeight: 1 }}>{data.weekInfo.weeks}</span>
                     <span style={{ fontSize: '18px' }}>å‘¨</span>
                     <span style={{ fontSize: '28px', fontWeight: 600 }}>+{data.weekInfo.days}</span>
                     <span style={{ fontSize: '18px' }}>å¤©</span>
                   </div>
                   <div style={{ marginTop: '12px', display: 'flex', alignItems: 'center', gap: '10px' }}>
                      <span style={{ fontSize: '15px', opacity: 0.9 }}>
                        å®å®åƒä¸ª <strong>{data.fetal.emoji} {data.fetal.size}</strong>
                      </span>
                      <span style={{ background: 'rgba(255,255,255,0.25)', padding: '4px 10px', borderRadius: '12px', fontSize: '12px', fontWeight: 500, border: '1px solid rgba(255,255,255,0.3)' }}>
                         {data.fetal.status}
                      </span>
                   </div>
                   {data.nextCheck && (
                       <div style={{ marginTop: '20px', background: 'rgba(255,255,255,0.2)', border: '1px solid rgba(255,255,255,0.3)', padding: '12px 16px', borderRadius: '12px', display: 'flex', justifyContent: 'space-between', alignItems: 'center', backdropFilter: 'blur(2px)' }}>
                          <div>
                            <div style={{ fontSize: '12px', opacity: 0.9, marginBottom: '2px' }}>è·ç¦» ä¸‹æ¬¡äº§æ£€</div>
                            <div style={{ fontSize: '15px', fontWeight: 700 }}>{data.nextCheck.name}</div>
                          </div>
                          <div style={{ textAlign: 'right' }}>
                            <div style={{ fontSize: '12px', opacity: 0.9 }}>çº¦å‰©</div>
                            <div style={{ fontSize: '24px', fontWeight: 700, lineHeight: 1 }}>{Math.max(1, data.nextCheck.days)}<span style={{ fontSize: '12px', fontWeight: 400 }}> å¤©</span></div>
                          </div>
                       </div>
                   )}
                </div>
            ) : (
                <div style={{ padding: '20px 0' }}>
                   <div style={{ fontSize: '20px', fontWeight: 600 }}>æ¬¢è¿ä½¿ç”¨å‡†å¦ˆå¦ˆåŠ©æ‰‹</div>
                   <div style={{ fontSize: '13px', opacity: 0.8, marginTop: '4px' }}>è¯·è¾“å…¥æ—¥æœŸå¼€å§‹è§„åˆ’</div>
                </div>
            )}
          </div>

          <div style={{ padding: '0 16px' }}>
            <div style={{ background: 'white', borderRadius: '16px', padding: '16px', marginTop: '-24px', boxShadow: '0 4px 12px rgba(0,0,0,0.05)', position: 'relative', zIndex: 5 }}>
              <label style={{ fontSize: '13px', color: '#666', display: 'block', marginBottom: '8px' }}>ğŸ“… æœ«æ¬¡æœˆç»ç¬¬ä¸€å¤© (LMP)</label>
              <input type="date" value={lmpDate} onChange={(e) => setLmpDate(e.target.value)} style={{ width: '100%', padding: '12px', fontSize: '16px', border: '1px solid #FFD1DC', borderRadius: '8px', outline: 'none', background: 'white' }} />
            </div>

            {data && (
              <React.Fragment>
                <div style={{ display: 'flex', background: 'white', padding: '4px', borderRadius: '12px', margin: '20px 0', boxShadow: '0 2px 8px rgba(0,0,0,0.03)' }}>
                  {[{k:'checkup',l:'ğŸ“‹ äº§æ£€'},{k:'fetal',l:'ğŸ‘¶ å‘è‚²'},{k:'guide',l:'ğŸ’¡ æŒ‡å—'}].map(t => (
                    <button key={t.k} onClick={() => setTab(t.k)} style={{ flex: 1, padding: '10px', borderRadius: '8px', border: 'none', background: tab === t.k ? (role === 'mom' ? '#FF6B95' : '#42A5F5') : 'transparent', color: tab === t.k ? 'white' : '#666', fontWeight: 500, transition: 'all 0.3s' }}>{t.l}</button>
                  ))}
                </div>

                {tab === 'checkup' && (
                  <div>
                    {checkupData.map((item) => {
                       const status = getCheckupStatus(item, data.weekInfo.weeks, completed);
                       const isExpanded = expanded === item.id;
                       return (
                         <div key={item.id} onClick={() => setExpanded(isExpanded ? null : item.id)} style={{ background: 'white', borderRadius: '12px', padding: '16px', marginBottom: '12px', border: status.status === 'current' ? (role === 'mom' ? '1px solid #FF6B95' : '1px solid #42A5F5') : '1px solid transparent', position: 'relative', overflow: 'hidden', boxShadow: '0 2px 6px rgba(0,0,0,0.02)' }}>
                           {status.status === 'completed' && <div style={{ position: 'absolute', right: '0', top: '0', width: '0', height: '0', borderStyle: 'solid', borderWidth: '0 50px 50px 0', borderColor: `transparent #4CAF50 transparent transparent` }}><div style={{ position: 'absolute', top: '6px', right: '-48px', color: 'white', fontSize: '14px', fontWeight: 'bold' }}>âœ“</div></div>}
                           <div style={{ display: 'flex', gap: '12px' }}>
                             <div style={{ fontSize: '24px', paddingTop: '2px' }}>{item.icon}</div>
                             <div style={{ flex: 1 }}>
                               <div style={{ display: 'flex', gap: '6px', marginBottom: '6px' }}>
                                 <span style={{ fontSize: '10px', padding: '2px 6px', background: status.bgColor, color: status.color, borderRadius: '4px', fontWeight: 500 }}>{status.label}</span>
                                 <span style={{ fontSize: '10px', padding: '2px 6px', background: '#F5F5F5', color: '#666', borderRadius: '4px' }}>å­•{item.weekRange}</span>
                               </div>
                               <div style={{ fontWeight: 600, color: status.status === 'completed' ? '#999' : '#333', fontSize: '15px' }}>{item.name}</div>
                             </div>
                             <div style={{ display: 'flex', alignItems: 'center', paddingRight: status.status === 'completed' ? '20px' : '0' }}>
                               <button onClick={(e) => { e.stopPropagation(); setCompleted({...completed, [item.id]: !completed[item.id]}); }} style={{ width: '28px', height: '28px', borderRadius: '50%', border: status.status === 'completed' ? '2px solid #4CAF50' : '2px solid #DDD', background: status.status === 'completed' ? '#4CAF50' : 'white', color: 'white', display: 'flex', alignItems: 'center', justifyContent: 'center', transition: 'all 0.2s' }}>âœ“</button>
                             </div>
                           </div>
                           {isExpanded && (
                             <div style={{ marginTop: '12px', paddingTop: '12px', borderTop: '1px dashed #EEE', fontSize: '13px' }}>
                               <div style={{ color: '#666', marginBottom: '8px', lineHeight: 1.5 }}>{item.purpose}</div>
                               <div style={{ background: role === 'dad' ? '#E3F2FD' : '#F0F9FF', padding: '10px', borderRadius: '8px', color: role === 'dad' ? '#1565C0' : '#0277BD', lineHeight: 1.5 }}>
                                 <strong>{role === 'dad' ? 'ğŸ‘¨ çˆ¸çˆ¸ä»»åŠ¡ï¼š' : 'ğŸ’¡ Tipsï¼š'}</strong>
                                 {role === 'dad' && item.tips_dad ? item.tips_dad : item.tips}
                               </div>
                               <div style={{ marginTop: '10px', color: '#555' }}><strong>æ£€æŸ¥é¡¹ç›®ï¼š</strong>{item.items.join('ã€')}</div>
                             </div>
                           )}
                         </div>
                       );
                    })}
                  </div>
                )}
                
                {tab === 'fetal' && (
                   <div style={{ background: 'white', borderRadius: '16px', padding: '20px' }}>
                      <div style={{ textAlign: 'center', marginBottom: '24px' }}>
                          <div style={{ fontSize: '80px' }}>{data.fetal.emoji}</div>
                          <div style={{ fontSize: '18px', fontWeight: 600, marginTop: '8px' }}>{data.fetal.size}</div>
                          <div style={{ color: '#666', fontSize: '14px', marginTop: '4px' }}>{data.fetal.status}</div>
                      </div>
                      <h3 style={{ fontSize: '16px', margin: '0 0 16px', color: '#333' }}>ğŸ“ˆ å‘è‚²å¯¹ç…§è¡¨</h3>
                      {Object.keys(fetalData).map(Number).sort((a,b)=>a-b).map(week => {
                        const info = fetalData[week];
                        const isPast = data.weekInfo.weeks > week;
                        const isCurrent = data.weekInfo.weeks >= week && data.weekInfo.weeks < week + 2;
                        const activeColor = role === 'mom' ? '#FF6B95' : '#42A5F5';
                        return (
                          <div key={week} style={{ display: 'flex', alignItems: 'center', gap: '12px', padding: isCurrent ? '16px 12px' : '12px 6px', margin: isCurrent ? '12px -6px' : '0', background: isCurrent ? '#FFF' : 'transparent', borderBottom: isCurrent ? 'none' : '1px solid #F5F5F5', borderRadius: isCurrent ? '12px' : '0', boxShadow: isCurrent ? '0 4px 12px rgba(0,0,0,0.08)' : 'none', border: isCurrent ? `2px solid ${activeColor}` : 'none', opacity: isPast ? 0.5 : 1, transition: 'all 0.3s' }}>
                            <div style={{ fontSize: isCurrent ? '32px' : '24px', filter: isPast ? 'grayscale(100%)' : 'none' }}>{info.emoji}</div>
                            <div style={{ flex: 1 }}>
                               <div style={{ fontSize: isCurrent ? '16px' : '14px', fontWeight: 500, color: isCurrent ? activeColor : (isPast ? '#999' : '#333') }}>{week}å‘¨ Â· {info.size}</div>
                               <div style={{ fontSize: '12px', color: '#888' }}>{info.status}</div>
                            </div>
                            <div style={{ fontSize: '12px', color: '#999' }}>{info.length}</div>
                          </div>
                        );
                      })}
                   </div>
                )}

                {tab === 'guide' && (
                  <div>
                    <div style={{ background: role === 'mom' ? 'linear-gradient(135deg, #FF6B95, #FF8A80)' : 'linear-gradient(135deg, #42A5F5, #64B5F6)', borderRadius: '16px', padding: '16px 20px', color: 'white', marginBottom: '16px' }}>
                      <div style={{ fontSize: '13px', opacity: 0.9 }}>å½“å‰é˜¶æ®µ</div>
                      <div style={{ fontSize: '18px', fontWeight: 600 }}>{data.guide.title}</div>
                    </div>
                    
                    {role === 'mom' ? (
                      <div style={{ display: 'grid', gridTemplateColumns: '1fr 1fr', gap: '12px' }}>
                        <div style={{ background: 'white', borderRadius: '16px', padding: '16px', gridColumn: '1 / -1' }}>
                           <h3 style={{ fontSize: '15px', margin: '0 0 12px', color: '#333' }}>ğŸ’Š å…³é”®è¡¥å‰‚</h3>
                           {data.guide.supplements.map((s, i) => (
                              <div key={i} style={{ marginBottom: '8px', paddingBottom: '8px', borderBottom: '1px dashed #EEE' }}>
                                 <div style={{ fontWeight: 600, fontSize: '14px', color: '#333' }}>{s.name} <span style={{fontSize:'12px', color:'#999', fontWeight:400}}>{s.dose}</span></div>
                                 <div style={{ fontSize: '12px', color: '#666' }}>{s.note}</div>
                              </div>
                           ))}
                        </div>
                        <div style={{ background: 'white', borderRadius: '16px', padding: '16px' }}>
                          <h3 style={{ fontSize: '15px', margin: '0 0 10px', color: '#2E7D32' }}>ğŸ¥— å®œåƒ</h3>
                          {data.guide.diet_good.map((f,i) => <div key={i} style={{ fontSize: '12px', marginBottom: '4px', color: '#555' }}>âœ… {f}</div>)}
                        </div>
                        <div style={{ background: 'white', borderRadius: '16px', padding: '16px' }}>
                          <h3 style={{ fontSize: '15px', margin: '0 0 10px', color: '#C62828' }}>âŒ å¿Œå£</h3>
                          {data.guide.diet_bad.map((f,i) => <div key={i} style={{ fontSize: '12px', marginBottom: '4px', color: '#555' }}>ğŸš« {f}</div>)}
                        </div>
                        <div style={{ background: 'white', borderRadius: '16px', padding: '16px', gridColumn: '1 / -1' }}>
                           <h3 style={{ fontSize: '15px', margin: '0 0 12px', color: '#1565C0' }}>ğŸ§˜â€â™€ï¸ è¿åŠ¨å»ºè®®</h3>
                           <div style={{ fontSize: '13px', color: '#555', lineHeight: 1.6, whiteSpace: 'pre-line' }}>{data.guide.exercise}</div>
                        </div>
                        <div style={{ background: 'white', borderRadius: '16px', padding: '16px', gridColumn: '1 / -1' }}>
                           <h3 style={{ fontSize: '15px', margin: '0 0 12px', color: '#F9A825' }}>ğŸ’¡ ç”Ÿæ´»è´´å£«</h3>
                           <div style={{ fontSize: '13px', color: '#555', lineHeight: 1.6, whiteSpace: 'pre-line' }}>{data.guide.lifestyle}</div>
                        </div>
                      </div>
                    ) : (
                      <div style={{ display: 'grid', gridTemplateColumns: '1fr', gap: '12px' }}>
                        <div style={{ background: 'white', borderRadius: '16px', padding: '16px', borderLeft: '4px solid #42A5F5' }}>
                           <h3 style={{ fontSize: '16px', margin: '0 0 8px', color: '#1565C0' }}>{data.guide.mission}</h3>
                        </div>
                        <div style={{ background: 'white', borderRadius: '16px', padding: '16px' }}>
                           <h3 style={{ fontSize: '15px', margin: '0 0 12px', color: '#2E7D32' }}>âœ… è¡ŒåŠ¨æ¸…å•</h3>
                           {data.guide.action_list.map((item, i) => (
                             <div key={i} style={{ fontSize: '13px', marginBottom: '8px', color: '#555', paddingLeft: '16px', textIndent: '-16px' }}>â€¢ {item}</div>
                           ))}
                        </div>
                        <div style={{ background: 'white', borderRadius: '16px', padding: '16px' }}>
                           <h3 style={{ fontSize: '15px', margin: '0 0 12px', color: '#C62828' }}>âŒ ç¦åŒºæé†’</h3>
                           {data.guide.avoid_list.map((item, i) => (
                             <div key={i} style={{ fontSize: '13px', marginBottom: '8px', color: '#555', paddingLeft: '16px', textIndent: '-16px' }}>â€¢ {item}</div>
                           ))}
                        </div>
                        <div style={{ background: '#FFF3E0', borderRadius: '16px', padding: '16px', border: '1px solid #FFE0B2' }}>
                           <h3 style={{ fontSize: '15px', margin: '0 0 8px', color: '#E65100' }}>â¤ï¸ åŠ åˆ†é¡¹</h3>
                           <div style={{ fontSize: '13px', color: '#EF6C00', lineHeight: 1.5 }}>{data.guide.bonus}</div>
                        </div>
                      </div>
                    )}
                  </div>
                )}

                {showShare && (
                  <div onClick={() => setShowShare(false)} style={{ position: 'fixed', top: 0, left: 0, right: 0, bottom: 0, background: 'rgba(0,0,0,0.85)', zIndex: 100, display: 'flex', alignItems: 'center', justifyContent: 'center', padding: '20px' }}>
                    <div onClick={e => e.stopPropagation()} className="share-card-modal" style={{ background: 'white', width: '100%', maxWidth: '320px', borderRadius: '20px', overflow: 'hidden', textAlign: 'center' }}>
                      <div style={{ padding: '40px 20px 30px', background: role === 'mom' ? '#FFF0F5' : '#E3F2FD' }}>
                        <div style={{ fontSize: '14px', color: '#888', marginBottom: '8px' }}>{formatDate(new Date())} Â· å­•æœŸæ‰“å¡</div>
                        <div style={{ display: 'flex', alignItems: 'baseline', justifyContent: 'center', gap: '4px', color: role === 'mom' ? '#FF6B95' : '#42A5F5' }}>
                            <span style={{ fontSize: '60px', fontWeight: 800, lineHeight: 1 }}>{data.weekInfo.weeks}</span><span style={{ fontSize: '20px', fontWeight: 600 }}>å‘¨</span><span style={{ fontSize: '32px', fontWeight: 600 }}>+{data.weekInfo.days}</span>
                        </div>
                        <div style={{ margin: '30px auto 20px', width: '120px', height: '120px', background: 'white', borderRadius: '50%', display: 'flex', alignItems: 'center', justifyContent: 'center', fontSize: '70px', boxShadow: '0 10px 20px rgba(0,0,0,0.05)' }}>{data.fetal.emoji}</div>
                        <div style={{ fontSize: '18px', color: '#333', fontWeight: 600 }}>å®å®åƒä¸€ä¸ª {data.fetal.size}</div>
                        <div style={{ fontSize: '14px', color: '#666', marginTop: '6px', background: 'rgba(255,255,255,0.6)', display: 'inline-block', padding: '4px 12px', borderRadius: '12px' }}>âœ¨ {data.fetal.status}</div>
                      </div>
                      <div style={{ padding: '24px 24px 20px' }}>
                        <div style={{ fontSize: '15px', color: '#555', fontStyle: 'italic', lineHeight: 1.6, marginBottom: '24px' }}>â€œ{data.quote}â€</div>
                      </div>
                      <div style={{ background: '#333', color: 'white', padding: '12px', fontSize: '12px' }}>{role === 'mom' ? 'æˆªå±åˆ†äº« Â· è®°å½•å¥½å­•æ—¶å…‰' : 'æˆªå±åˆ†äº« Â· è®°å½•è¶…çº§å¥¶çˆ¸'}</div>
                    </div>
                  </div>
                )}
              </React.Fragment>
            )}
          </div>

          <div style={{ textAlign: 'center', padding: '30px 0 20px' }}>
             {!showProfile ? (
               <div onClick={() => setShowProfile(true)} style={{ display: 'inline-block', fontSize: '12px', color: '#999', cursor: 'pointer', padding: '10px', textDecoration: 'underline' }}>å¤å¦®ğŸ’—ç‚¹å‡»è”ç³»</div>
             ) : (
               <div className="fade-in" style={{ background: 'white', margin: '0 20px', padding: '24px', borderRadius: '16px', boxShadow: '0 8px 30px rgba(0,0,0,0.12)', position: 'relative' }}>
                  <button onClick={(e) => {e.stopPropagation(); setShowProfile(false);}} style={{ position: 'absolute', top: '10px', right: '10px', background: 'none', border: 'none', fontSize: '20px', color: '#999', cursor: 'pointer' }}>Ã—</button>
                  <div style={{ fontSize: '18px', fontWeight: 700, color: '#333', marginBottom: '4px' }}>PMå¤å¦®</div>
                  <div style={{ fontSize: '12px', color: '#FF6B95', fontWeight: 500, marginBottom: '12px' }}>æŸè·¨å¢ƒå…¬å¸PM Â· æ­£åœ¨ç»å†äººç”Ÿæœ€å¤§é¡¹ç›®ï¼šå½“å¦ˆ</div>
                  <div style={{ fontSize: '13px', color: '#666', lineHeight: 1.6, textAlign: 'left', marginBottom: '16px' }}>
                     ç”¨åšé¡¹ç›®çš„é€»è¾‘ï¼Œè§£å†³æ€€å­•ğŸ«„å¸¦å¨ƒçš„éš¾é¢˜ã€‚<br/>å¤‡å­• / æ€€å­• / æé’± / åç„¦è™‘ â™¥ï¸
                  </div>
                  <div style={{ background: '#F5F7FA', padding: '12px', borderRadius: '8px', textAlign: 'center', border: '1px solid #EEE' }}>
                      <div style={{ fontSize: '12px', color: '#888', marginBottom: '4px' }}>å¾®ä¿¡å· (é•¿æŒ‰å¯å¤åˆ¶)</div>
                      <div style={{ fontSize: '20px', fontWeight: 'bold', color: '#333', userSelect: 'all', WebkitUserSelect: 'all' }}>839844928</div>
                  </div>
                  <div style={{ color: '#CCC', fontSize: '11px', marginTop: '12px' }}>å¾ˆé«˜å…´è®¤è¯†å¤§å®¶ï¼Œäº¤ä¸ªæœ‹å‹</div>
               </div>
             )}
          </div>
        </div>
      );
    }
    const root = ReactDOM.createRoot(document.getElementById('root'));
    root.render(<App />);
  </script>
</body>
</html>
